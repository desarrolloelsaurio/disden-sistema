procedure ltot1amm
PARA PORIMPRE
=OPCLI()
=OPMER()
=OPCAG()
=OPRUB()
store nul to respuesta
if !empty(elirub("a Consultar",-1,1))
	ELRUBRO = left(mix.texto2,3)
	sele mer
	STORE {} TO M.FECINI,M.FECFIN
	IF ENTRE_FE("a Listar")
		=OPFAC()
		=DOTALK()
		=WORKING()
		
		m.titulo = ""

		SELECT SUM(FAX.TOTAL) AS MONTO, FAC.CODCLI, PER.CAG, PER.CLIENTE, FAX.ARTICULO, MER.MERCA;
			FROM FAX, FAC, PER, MER ;
			WHERE 	BETW(FAC.FECHAEM, M.FECINI, M.FECFIN) AND ;
					FAX.ARTICULO = MER.ARTICULO AND;
					MER.RUBRO    = ELRUBRO      AND;
					FAC.FACTURA  = FAX.FACTURA  AND;
					FAC.CODCLI   = PER.CODCLI  ;
			GROUP BY MER.ARTICULO INTO CURSOR LAME
		=UNWORK()
		=UNTALK()
		IF PORIMPRE
			REPORT FORM LTOT1AMA TO PRINT PROMPT NOCONSOLE
		ELSE
			REPORT FORM LTOT1AMA PREVIEW NOCONSOLE
		ENDIF
		USE IN LAME
	endif
endif
return