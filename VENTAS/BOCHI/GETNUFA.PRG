FUNCTION GETNUFA
SELE DOC
QUESUC=IIF(EMPTY(GETENV("HLASUC")),"1",GETENV("HLASUC"))
NQUESUC = VAL(QUESUC)
IF TIPOCLI="A"
	IF NQUESUC=1
		GO 1
	ELSE
		IF NQUESUC=2
			GO 4
		ELSE
			IF NQUESUC=3
				GO 10
			ELSE
				GO (NQUESUC*2+11)
			ENDIF
		ENDIF
	ENDIF
ELSE
	IF NQUESUC=1
		GO 2
	ELSE
		IF NQUESUC=2
			GO 5
		ELSE
			IF NQUESUC=3
				GO 11
			ELSE
				GO (NQUESUC*2+12)
			ENDIF
		ENDIF
	ENDIF
ENDIF
=LOCK(str(recno("doc")),"DOC") .OR. LOK("DOC",str(recno("doc")))      
STORE DOC.NUMERO TO M.NUMERO,M.ELNUM
M.NUMERO=TIPOCLI+ZERO(NQUESUC,4)+'-'+ZERO(M.NUMERO,8)
store (TIPOCLI="A") to m.esa
RETURN .T.