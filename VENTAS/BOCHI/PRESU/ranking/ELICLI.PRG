FUNCTION ELICLI
PARAMETER MSG,R1,C1
IF !EMPTY(MSG)
   WAIT "Cliente "+MSG WIND NOWA
ENDIF
SELE PER
IF EMPTY(ON("KEY","F3")) .and. !clipop
   STORE .T. TO BORRAKEY
   ON KEY LABEL F3 ;
   return SEEKTECX(30,"PER","PER.CLIENTE","PER.CODCLI","CLIENTES")
ELSE
   STORE .F. TO BORRAKEY
ENDIF
IF CLIPOP
   RESPUESTA=ELICLISQ()
   =closdbf("nadas")
ELSE
    RESPUESTA=ELIPER1('Cliente '+MSG,'PER','CODCLI',10,Q_FILCLI())
ENDIF
RETURN WCL() .AND. ;
  IIF(BORRAKEY,OFF_F2(),.T.) .AND. ;
  IIF(LAST()=27 .OR. READKEY()=12,.F.,RESPUESTA)

FUNCTION ELICLISQ
  SELECT ALL CODCLI,CLIENTE FROM PER ;
  INTO CURSOR NADAS ORDER BY CLIENTE WHERE FILTRO="C"
  DEFI POPU NADAS FROM 0,0 PROM FIEL CLIENTE ;
  FOOTER " Cliente a "+alltrim(msg)+" " ;
  TITL ' Clientes ' ;
  IN SCREEN
  ON SELE POPU NADAS DO RESP1
  store nul to respuesta
  ACTI POPUP NADAS
  STOR !EMPTY(respuesta) TO respuesta
  SELE per
  set order to tag codcli
return IIF(RESPUESTA,SEEK(NADAS.CODCLI),.T.)

