FUNCTION LFACPZ0
PARAMETER OTRO
	=WORKING()
=IIF(OTRO,.T.,TTLCHEQ(8))
SELE FAC
SET ORDER TO TAG FACTURA
SET ORDER TO TAG CODCLI IN PER
SET RELATION TO FAC.CODCLI INTO PER
SET ORDER TO TAG CODVIA IN VIA
SET RELATION TO FAC.CODVIA INTO VIA ADDI
SET ORDER TO TAG PAGCOD IN MIX
SET RELATION TO FAC.CONDPAGO INTO MIX ADDI
STOR NUL TO CASOS
BASE=GENTMP()
TMP=GENTMP()
IF ".T."==FISC
	   DO CASE
	   CASE M.FILPAG=3
	   SELE FAC
       SET ORDER TO
	   SORT ON CONDPAGO TO (TMP) ;
	   FIELD MIX.TEXTO1,MONTOBRU,MONTOIVA,MONTOOT2,MONTONET
	   SELE FAC
	   USE
	   USE (TMP) ALIAS FAC EXCL
	   OTHERWISE
	   INDEX on FACTURA TO (base) COMP
	   ENDCASE
	ELSE
	   DO CASE
	   CASE M.FILPAG=3
	   	   SELE FAC
	   	   SET ORDER TO
	   SORT ON CONDPAGO TO (TMP) ;
	   FOR &FISC ;
	   FIELD MIX.TEXTO1,MONTOBRU,MONTOIVA,MONTOOT2,MONTONET
	   SELE FAC
	   USE
	   USE (TMP) ALIAS FAC EXCL
	   OTHERWISE
	   INDEX on FACTURA TO (base) FOR &FISC COMP
	   ENDCASE
	ENDIF
*	IF ".T."#FISC*
*
**    sele fac
*    set order to
*    loscampos=listacpo()
*    base=GENTMP()
*	sort on FACTURA TO (base) FOR &FISC fields &loscampos
*	sele fac
*	use (base) alias fac
*if haycampo("CODCLI","FAC")
*set relation to faC.CODCLI INTO PER
*ENDIF
*	if haycampo("CODVIA","FAC")
*		set relation to faC.CODVIA INTO VIA ADDI
*      ENDIF
*ENDIF
*if haycampo("CONDAGO","FAC")
*set relation to faC.CONDPAGO INTO MIX ADDI
*ENDIF
IF !OTRO
	tt='Listado de '+PROP(TIT_INVOS)+TTQUE
	ACLA=HAZ_ACLA()
	linea=REPL("=",LEN(acla))
	tt='Listado de '+PROP(TIT_INVOS)+TTQUE
ENDIF
	=UNWORK()
RETURN .T.
