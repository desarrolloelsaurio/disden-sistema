*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        03/31/96             ELIFAR.PRG                16:31:13 
*                                                                
*       픔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        GOYO REINER                                             
*                                                                
*        Copyright (c) 1996 GREGORIO REINER                      
*        MITRE 2480 4 B                                         
*        ROSARIO, SF  2000                                       
*                                                                
*        Description:                                            
*        This program was automatically generated by GENSCRN.    
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

PARAMETERS tit_sin

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                 ELIFAR/MS-DOS Setup Code - SECTION 1           
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
SELE PRO
SCAT MEMV BLAN
SELE FAR
SCAT MEMV BLAN

#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                       MS-DOS Window definitions                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

IF NOT WEXIST("win") ;
	OR UPPER(WTITLE("WIN")) == "WIN.PJX" ;
	OR UPPER(WTITLE("WIN")) == "WIN.SCX" ;
	OR UPPER(WTITLE("WIN")) == "WIN.MNX" ;
	OR UPPER(WTITLE("WIN")) == "WIN.PRG" ;
	OR UPPER(WTITLE("WIN")) == "WIN.FRX" ;
	OR UPPER(WTITLE("WIN")) == "WIN.QPR"
	=MOVEWIX("win",	INT((SROW()-9)/2), INT((SCOL()-66)/2), INT((SROW()-9)/2)+8, INT((SCOL()-66)/2)+65, ;
	 ' Selecciona '+alltrim(tit_sin)+' '		,' '+janname+' ')		
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                      ELIFAR/MS-DOS Screen Layout               
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
IF WVISIBLE("win")
	ACTIVATE WINDOW win SAME
ELSE
	ACTIVATE WINDOW win NOSHOW
ENDIF
@ 5,1 SAY 'N de '+tit_sin ;
	SIZE 1,22
@ 1,11 GET m.PROCOD ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _r970zeq1s() ;
	VALID _r970zeq34() ;
	MESSAGE "Ingrese Cliente"+TEX_EFES	 ;
	ERROR "PROVEEDOR INEXISTENTE"
@ 1,25 SAY M.PROVEEDOR ;
	SIZE 1,30 ;
	PICTURE "@!"
@ 2,11 SAY M.domicilio ;
	SIZE 1,30 ;
	PICTURE "@!"
@ 2,43 SAY IIF(EMPTY(M.LOCAL),"",SAYMIX(M.LOCAL,'CIUCOD')) ;
	SIZE 1,20 ;
	PICTURE "@!"
@ 3,11 SAY IIF(EMPTY(M.CONDIVA),"",XACIVA[M.CONDIVA,1]) ;
	SIZE 1,22 ;
	PICTURE repl('x',20)
@ 3,43 SAY M.NROIVA ;
	SIZE 1,15 ;
	PICTURE "@!"
@ 5,23 SAY ":" ;
	SIZE 1,1, 0
@ 5,25 GET m.factura ;
	SIZE 1,14 ;
	DEFAULT " " ;
	PICTURE "A!!!!!!!!!!!!!" ;
	WHEN _r970zeqky() ;
	VALID _r970zeqnh() ;
	MESSAGE "N DE "+UPPER(TIT_SIN)+" - [F4] Muestra "+UPPER(TIT_SIN) ;
	ERROR "DOCUMENTO EXISTENTE - POR FAVOR REVISE EL NUMERO"
@ 1,1 SAY "Proveedor" ;
	SIZE 1,9, 0

IF NOT WVISIBLE("win")
	ACTIVATE WINDOW win
ENDIF

READ CYCLE ;
	SHOW _r970zeqp0()

=RELEWIN("win")

#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                      ELIFAR/MS-DOS Cleanup Code                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
ON KEY LABEL F4
ON KEY LABEL ENTER
RETURN LAST()#27 .AND. ;
RIGHT(M.FACTURA,8)#"00000000" .AND. ;
XSEEK(M.FACTURA+M.PROCOD,'FAR','FACTURA')



*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*          ELIFAR/MS-DOS Supporting Procedures and Functions     
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
FUNCTION ELIFAR_BR
SELE FAR
ON KEY LABEL ENTER KEYB CHR(23)
BROW ;
FIELD FACTURA:H="FACTURA":R,;
FECHAEM:H="EMISION":R,;
MONTO:H="MONTO":P="9,999,999.99":R,;
MONTOBRU:H="GRAVADO":P="9,999,999.99":R ;
FOR PROCOD=M.PROCOD
ON KEY LABEL F4
ON KEY LABEL ENTER
RETURN IIF(LAST()#27,FAR.FACTURA,"")

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R970ZEQ1S           m.PROCOD WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         ELIFAR,     Record Number:    3    
*        Variable:            m.PROCOD                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      1                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r970zeq1s     &&  m.PROCOD WHEN
#REGION 1
=SGET("WIN")
ON KEY LABEL F2 M.PROCOD=QUEPOPUP("P/"+UPPER(TIT_SIN),1,25)
ON KEY LABEL F3 M.PROCOD=SEEKTECX(30,'PRO','PROVEEDOR','PRO.PROCOD','PROVEEDOR',"","",1,25)
RETURN .T.


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R970ZEQ34           m.PROCOD VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         ELIFAR,     Record Number:    3    
*        Variable:            m.PROCOD                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      2                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r970zeq34     &&  m.PROCOD VALID
#REGION 1
IF LAST()=27
   RETURN .T.
ELSE
   IF !EMPTY(M.PROCOD) .AND. XSEEK(M.PROCOD,'PRO','PROCOD')
      SELE PRO
      SCAT MEMV
      STORE 0 TO M.DESCUENTO
      ELIVA=XACIVA[PRO.CONDIVA,1]
      RETURN SGET("WIN")
   ENDIF
ENDIF
RETURN .F.


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R970ZEQKY           m.factura WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         ELIFAR,     Record Number:   10    
*        Variable:            m.factura                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      3                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r970zeqky     &&  m.factura WHEN
#REGION 1
IF LAST()=27
   RETURN .F.
ENDIF
   STORE OFF_F2() TO HAYFACTURA
   ON KEY LABEL F4 M.FACTURA=ELIFAR_BR()
   =SGET("WIN")
RETURN .T.


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R970ZEQNH           m.factura VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         ELIFAR,     Record Number:   10    
*        Variable:            m.factura                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      4                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r970zeqnh     &&  m.factura VALID
#REGION 1
M.FACTURA=Q_FAC(M.FACTURA)
CLEA READ
RETURN SGET("WIN")


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R970ZEQP0           Read Level Show                    
*                                                                
*        Function Origin:                                        
*                                                                
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         ELIFAR                             
*        Called By:           READ Statement                     
*        Snippet Number:      5                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r970zeqp0     && Read Level Show
PRIVATE currwind
STORE WOUTPUT() TO currwind
*
* Show Code from screen: ELIFAR
*
#REGION 1
IF SYS(2016) = "WIN" OR SYS(2016) = "*"
	ACTIVATE WINDOW win SAME
	@ 5,1 SAY 'N de '+tit_sin ;
		SIZE 1,22, 0
	@ 1,25 SAY M.PROVEEDOR ;
		SIZE 1,30, 0 ;
		PICTURE "@!"
	@ 2,11 SAY M.domicilio ;
		SIZE 1,30, 0 ;
		PICTURE "@!"
	@ 2,43 SAY IIF(EMPTY(M.LOCAL),"",SAYMIX(M.LOCAL,'CIUCOD')) ;
		SIZE 1,20, 0 ;
		PICTURE "@!"
	@ 3,11 SAY IIF(EMPTY(M.CONDIVA),"",XACIVA[M.CONDIVA,1]) ;
		SIZE 1,22, 0 ;
		PICTURE repl('x',20)
	@ 3,43 SAY M.NROIVA ;
		SIZE 1,15, 0 ;
		PICTURE "@!"
ENDIF
IF NOT EMPTY(currwind)
	ACTIVATE WINDOW (currwind) SAME
ENDIF