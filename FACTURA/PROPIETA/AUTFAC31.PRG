FUNCTION AUTFAC31
	PARAMETER AU_SUMA
	REGISTRO=STR(RECNO())
	=LOCK("CCP") .OR. LOK("CCP")
	IF CCP.AUTORIZ
		REPL CCP.AUTORIZ WITH .F.
		STORE M.TOTAUT-CCP.MONTO TO M.TOTAUT
	ELSE
		REPL CCP.AUTORIZ WITH .T.
		STORE M.TOTAUT+CCP.MONTO TO M.TOTAUT
	ENDIF
	UNLO IN CCP
	IF AU_SUMA
		WAIT "MONTO AUTORIZADO: "+ALLT(TRANS(M.TOTAUT,"99,999.99")) WIND NOWA
	ENDIF
RETURN IAUD(CCP.DETALLE,.T.)
