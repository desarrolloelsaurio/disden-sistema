FUNCTION GET_PRE
PARAMETER G_COSTO,G_POLIG,G_TIPO,G_DESC,G_ENDOL,G_CONIVA
PRIVATE G_COSTO,G_ENDOL,PRECIO,G_POLIG,G_TIPO,PRECIO,G_DESC,G_PCTJ,PC,REGIS
PRECIO=G_COSTO*G_DESC
IF SIGN(G_TIPO)=0   && NO HAY PORC Y POL VA POR DEFECTO
   G_PCTJ=IIF(G_POLIG=1,XAP1,IIF(G_POLIG=2,XAP2,IIF(G_POLIG=3,XAP3,XAP4)))
ELSE
   IF SIGN(G_TIPO)=1  && EL PORCENTAJE ESTA CARGADO EN EL REGISTRO
      IF TYPE("AGX")#"U"
         G_PCTJ=AGX[G_POLIG+17]
      ELSE
         G_PCTJ=IIF(G_POLIG=1,MER.PRECIO1,IIF(G_POLIG=2,MER.PRECIO2,IIF(G_POLIG=3,MER.PRECIO3,MER.PRECIO4)))
      ENDIF
   ELSE   && HAY G_POLIGONAL
      DIME PC[2,4]
      STORE NUL TO PC
      REGIS=UBICA(G_POLIG,G_TIPO,G_COSTO,@PC)
      G_PCTJ=GET_PRE1(G_COSTO,@PC)
   ENDIF
ENDIF
G_PCTJ=1+G_PCTJ/100
G_SALIDA=G_COSTO*G_PCTJ
G_SALIDA=IIF(G_ENDOL,G_SALIDA*XACOTIZ,G_SALIDA)
G_SALIDA=IIF(G_CONIVA,G_SALIDA*IIF(G_POLIG=1,XAIVA1,IIF(G_POLIG=2,XAIVA2,IIF(G_POLIG=3,XAIVA3,XAIVA4))),G_SALIDA)
G_SALIDA=IIF(G_ENDOL,ROUND(G_SALIDA,2),REDON(G_SALIDA))
RETURN G_SALIDA
