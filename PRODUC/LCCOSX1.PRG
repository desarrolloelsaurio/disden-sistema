FUNCTION LCCOSX1
	EXTERNAL ARRAY TOTAL
	#DEFINE PAIP   "|"                            && PAIP
	STORE .F. TO M.PASO
	IF !EMPTY(TELCODPRO)
		IF YLAMADRE .AND. XSEEK(USUARIO+SPACE(10),"TELTEMP","TELCODPRO")) 
		    STORE .T. TO M.PASO
			M.CODPRO   = TELTEMP.TELCODPRO
			M.DESCRIP  = TELTEMP.TELA
			M.PROCOD   = PADC("VARIOS",10)
			M.STOCK    = TELTEMP.STOCK
			M.STOCKRES = TELTEMP.STOCKRES+TELTEMP.STKRESPEN
			M.COMPRADO = TELTEMP.STKENTPEN
			M.MONTO    = TELTEMP.MONTO
			M.UNID     = TELTEMP.UNIDAD
		ELSE
			=XSEEK(TELCODPRO, "TELS", "TELCODPRO")
			M.CODPRO   = TELCODPRO
			M.DESCRIP  = TELS.TELA
			M.PROCOD   = TELS.PROCOD
			M.STOCK    = TELS.STOCK
			M.STOCKRES = TELS.STOCKRES+TELS.STKRESPEN
			M.COMPRADO = TELS.STKENTPEN
			M.MONTO    = TELS.MONTO
			M.UNID     = TELS.UNIDAD
		ENDIF
	ELSE
		=XSEEK(AVICODPRO, "AVIS", "AVICODPRO")
		M.CODPRO   = AVICODPRO
		M.DESCRIP  = AVIS.AVIO
		M.PROCOD   = AVIS.PROCOD
		M.STOCK    = AVIS.STOCK
		M.STOCKRES = AVIS.STOCKRES+AVIS.STKRESPEN
		M.COMPRADO = AVIS.STKENTPEN
		M.MONTO    = AVIS.MONTO
		M.UNID     = AVIS.UNIDAD
	ENDIF
	? PAIP
	?? M.CODPRO
	?? PAIP
	IF M.PASO
	   ?? PADC("--> "+ALLTRIM(M.DESCRIP)+" <-",36)
	ELSE
   	   ?? LEFT(M.DESCRIP,20)
	   ?? PAIP
	   ?? SAYPER(M.PROCOD,"PROCOD",15)
	ENDIF	
	?? PAIP
	?? CANTIDAD PICT "99999999.99"
	?? PAIP
	?? SAYMIX(M.UNID,"MDDCOD",5)
	?? PAIP
	?? M.STOCK PICT "99999999.99"
	?? PAIP
	?? M.STOCKRES PICT "99999999.99"
	?? PAIP
	?? M.COMPRADO PICT "99999999.99"
	?? PAIP
	M.STOCK=M.STOCK+M.COMPRADO-M.STOCKRES
	M.STOCK=IIF(CANTIDAD>M.STOCK,CANTIDAD-M.STOCK,0)
	?? M.STOCK PICT "99999999.99"
	?? PAIP
	M.MONTO=M.MONTO*M.STOCK
	?? M.MONTO PICT "99999999.99"
	?? PAIP
	STORE M.MONTO+TOTAL TO TOTAL
RETURN .T.
