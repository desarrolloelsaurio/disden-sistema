* ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
* บ PROCEDIMIENTO : LLIQI1.PRG                                               บ
* บ COMENTARIO    : LISTA LIQUIDACION POR PANTALLA                           บ
* ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ
FUNCTION LLIQI1
	PRIVATE TMPPR
	STORE PADC("DESCRIPCION",40)+PAIP TO ACLA
	STORE RIGHT('9999999,999,999.99',XACDIGI) TO PICU
	SELE TIX
	INDE ON UNICOD TO (GENTMP()) FOR TIX.CONCOD=CNS.CONCOD UNIQ COMP
	COUNT TO M.CUANT
	DIME TTOT[M.CUANT]
	STORE NUL TO TTOT
	SCAN
		STORE ACLA+IIF(XSEEK(TIX.UNICOD,"MIX","TIPCOD");
			,PADC(ALLTRIM(MIX.TEXTO1),XACDIGI),;
			TIX.UNICOD)+PAIP TO ACLA
	ENDS
	STORE ACLA+PADC("TOTALES",XACDIGI)+PAIP TO ACLA
	USE
	DO OPTIX
	STORE NUL TO SSUM,PUNTERO,M.TTOT
	LNS=REPL("=",MIN(LEN(ACLA),79))
	tt="Liquidaciขn Consorcio:"+ALLTRIM(cns.consorcio)
	TT1=CNS.DIRECCION
	TT2=ALLTRIM(SAYMIX(CNS.LOCALIDAD,"CIUCOD"))
	STORE LEFT(SINCOSAS(CNS.CONSORCIO),8)+'.TXT' TO TMPPR
	SET PRINTER TO (TMPPR)
	SET PRINTER ON
	SET CONSO OFF
	? TT
	? TT1
	? TT2
	?
	? LNS
	? ACLA
	? LNS
	SELE LIQ
	SET RELATION TO LINEA INTO RES
	GO TOP
	STORE NUL TO M.TOTAL
	STORE 1 TO M.YAVAN
	?RES.LINELIQ
	??PAIP
	SCAN
		IF M.YAVAN>M.CUANT
			=IMP_NUMER(M.TOTAL)
			STORE NUL TO M.TOTAL
			STORE 1 TO M.YAVAN
			?RES.LINELIQ
			??PAIP
		ENDIF
		=IMP_NUMER(MONTO)
		STORE M.TOTAL+MONTO TO M.TOTAL
		STORE TTOT[M.YAVAN]+MONTO TO TTOT[M.YAVAN]
		STORE M.YAVAN+1 TO M.YAVAN
	ENDS
	=IMP_NUMER(M.TOTAL)
	?LNS
	?PADR('TOTALES',40)
	??PAIP
	STORE NUL TO M.TOTAL
	FOR M.I=1 TO M.CUANT
		=IMP_NUMER(TTOT[M.I])
		STORE TTOT[M.I]+M.TOTAL TO M.TOTAL
	ENDF
	=IMP_NUMER(M.TOTAL)
	?
	?
	SET PRINTER TO
	SET PRINTER OFF
	SET CONSOLE ON
	SELE CNX
	=REOPLIQ()
	SET ORDER TO TAG CONSORCI IN PER
RETURN TMPPR

FUNCTION IMP_NUMER
	PARA NRO
	PRIV NRO
	?? NRO PICT PICU
	?? PAIP
RETURN .T.
