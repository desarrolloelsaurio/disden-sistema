* ษออออออออออออออออออออออออออออออออออออออออออออออออออป
* บ PROCEDIMIENTO : LPACCON.PRG                      บ
* บ COMENTARIO    : LISTADO DE CONTROL  DE PACIENTES บ
* ฬออออออออออออออออออออออออออออออออออออออออออออออออออน
* บ AUTOR      : GOYO REINER                         บ
* บ FECHA      : 08-24-94 12:26pm                    บ
* บ COPYRIGHT  : 1994 by GREGORIO REINER             บ
* ศออออออออออออออออออออออออออออออออออออออออออออออออออผ
#DEFINE BOTOM  "  "+repl("ฐ",78)                 && BOTOM
#DEFINE PAIP   "|"                               && PAIP
#DEFINE CRLF CHR(13)+CHR(10)                     && CRLF
PARAMETER PORPAN
LP_DIJO=ALLTRIM(PROM())
DO CASE
CASE LP_DIJO='Pacientes no en condiciones'
	=WORKING()
	=DOTALK()
	=OPPAC()
	=OPLIQ()
	SET ORDER TO TAG PACCOD IN PER
	SET RELA TO PACIENTE INTO PER
	=FLOCK("LIQ") .OR. FLOK("LIQ")
	TMP=GENTMP()
	SORT ON PER.CLIENTE TO (TMP) ;
	FOR !LIQUIDADO .AND. ;
		(EMPTY(LIQ.ORDEN) .OR. ;
		EMPTY(PER.TEXTO1) .OR. ;
		EMPTY(PER.TEXTO3) .OR. ;
		EMPTY(LIQ.PRACTICA))
	USE
	USE (TMP) ALIAS LIQ EXCL
	SET ORDER TO TAG PACCOD IN PER
	SET RELA TO PACIENTE INTO PER	
	EXTERNAL PROCEDURE LPACCON0.PRG
	ACLA=PAIP+;
	"TP"+PAIP+;
	"  NUMERO  "+PAIP+;
	"  CODIGO  "+PAIP+;
	PADC("PACIENTE",IIF(PORPAN,20,30))+PAIP+;
	PADC("PROBLEMA",24)+PAIP
	M.LINEA=REPL("=",LEN(ACLA))
	TT="Listado de Pacientes"+;
	CRLF+;
	"No en condiciones de ser Facturados"
	=UNTALK()
	=UNWORK()
	IF PORPAN
 	   DO LGRLP WITH "LIQ","LPACCON0()","NO EN CONDICIONES","LPACCON0"
	ELSE
	   DO LGRLI WITH "LIQ","LPACCON0()","NO EN CONDICIONES","LPACCON0"
	ENDIF
=OPLIQ(.T.)
CASE LP_DIJO='Datos Personales incompletos'
	=WORKING()
	=DOTALK()
    =OPPAC()
	TMP=GENTMP()
	SORT ON CODCLI TO (TMP) ;
	FOR EMPTY(TEXTO1) .OR. ;
	EMPTY(TEXTO2) .OR. ;
	EMPTY(NU2)
	USE
	USE (TMP) ALIAS PER EXCL
	EXTERNAL PROCEDURE LPACCON1.PRG
	ACLA=PAIP+;
	"  CODIGO  "+PAIP+;
	PADC("PACIENTE",30)+PAIP+;
	PADC("PROBLEMA",24)+PAIP
	M.LINEA=REPL("=",LEN(ACLA))
	TT="Listado de Pacientes"+;
	CRLF+;
	"Datos Personales Incompletos"
	=UNTALK()
	=UNWORK()
	IF PORPAN
 	   DO LGRLP WITH "PER","LPACCON1()","INCOMPLETO EN PER","LPACCON1"
	ELSE
	   DO LGRLI WITH "PER","LPACCON1()","INCOMPLETO EN PER","LPACCON1"
	ENDIF
	=REOPPER()
CASE LP_DIJO='Datos de Liquidaciขn incompletos'
	=WORKING()
	=DOTALK()
	=OPPAC()
	=OPLIQ()
	SET ORDER TO TAG PACCOD IN PER
	SET RELA TO PACIENTE INTO PER
	=FLOCK("LIQ") .OR. FLOK("LIQ")
	TMP=GENTMP()
	SORT ON PER.CLIENTE TO (TMP) ;
	FOR !LIQUIDADO .AND. ;
		(EMPTY(LIQ.ORDEN) .OR. ;
         EMPTY(LIQ.MEDICO) .OR. ;
         EMPTY(LIQ.INTERNO))
	USE
	USE (TMP) ALIAS LIQ EXCL
	SET ORDER TO TAG PACCOD IN PER
	SET RELA TO PACIENTE INTO PER	
	EXTERNAL PROCEDURE LPACCON2.PRG
	ACLA=PAIP+;
	"TP"+PAIP+;
	"  NUMERO  "+PAIP+;
	"  CODIGO  "+PAIP+;
	PADC("PACIENTE",IIF(PORPAN,20,30))+PAIP+;
	PADC("PROBLEMA",24)+PAIP
	M.LINEA=REPL("=",LEN(ACLA))
	TT="Listado de Pacientes"+;
	CRLF+;
	"No en condiciones de ser Facturados"
	=UNTALK()
	=UNWORK()
	IF PORPAN
 	   DO LGRLP WITH "LIQ","LPACCON2()","NO EN CONDICIONES","LPACCON0"
	ELSE
	   DO LGRLI WITH "LIQ","LPACCON2()","NO EN CONDICIONES","LPACCON0"
	ENDIF
=OPLIQ(.T.)

ENDCASE  
RETURN MEN_LIN(BOTOM)
