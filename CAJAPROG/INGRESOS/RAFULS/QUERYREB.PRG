*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        09/23/95            QUERYREB.PRG               19:11:39 
*                                                                
*       픔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        GREGORIO REINER                                         
*                                                                
*        Copyright (c) 1995 GOYO REINER                          
*        MITRE 1480 '4' B                                       
*        ROSARIO, SF  2000                                       
*                                                                
*        Description:                                            
*        This program was automatically generated by GENSCRN.    
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

PARAMETERS porpan

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                QUERYREB/MS-DOS Setup Code - SECTION 1          
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
=HORA_ULP(PROGRAM())
STORE "" TO TTREC,TTFEC,TTCLI
STORE 1  TO FILREC,FILFEC,FILCLI
STORE "" TO QUEREC,QUEFEC,QUECLI
STORE SPACE(20) TO SHREM,SHFEC,SHTAL,SHCOR
** Start of inserted file \SISTEMAS\DEFINES.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴start
#DEFINE BOTOM  "  "+repl("",78)                 && BOTOM
#DEFINE ABA    "Abriendo Base de "               && ABA
#DEFINE NUL    0                                 && NUL
#DEFINE PICUMAX "9,999,999,999,999.99"           && PICUMAX
#DEFINE PAIP   "|"                               && PAIP
#DEFINE FOLC  ".F."                              && FOLC
#DEFINE CRLF CHR(13)+CHR(10)                     && CRLF
#DEFINE FOLL  .F.                                && FOLL
#DEFINE TRUC  ".T."                              && TRUC
#DEFINE TRUL  .T.                                && TRUL
#DEFINE IMPRIMIENDO  PADC(' IMPRIMIENDO LOS DATOS REQUERIDOS - [TECLA] Interrumpe ',80,'') && IMPRIMIENDO
#DEFINE ELYES  "SI"                              && ELYES
#DEFINE ELNOU  "NO"                              && ELNOU
#DEFINE ONE    1                                 && ONE
#DEFINE TWO    2                                 && TWO
#DEFINE THREE  3                                 && THREE
#DEFINE FOUR   4                                 && FOUR
#DEFINE TEX_EFES " - [F2] Popup - [F3] B즧queda" && TEX_EFES
#DEFINE TEX_CALC "CALCULANDO - ESPERE POR FAVOR" && TEX_CALC
#DEFINE GRABANDO PADC(' Grabando los datos ingresados - Espere por Favor ',80,"")
#DEFINE NOVACIO "CAMPO DE INGRESO OBLIGATORIO - NO PUEDE ESTAR VACIO" && NOVACIO
#DEFINE NOFECHA "LAS FECHAS ESTAN ENTRE VALORES INACEPTABLES" && NOFECHA
#DEFINE ESPAOPC " - Barra Espac. para cambiar de Opci줻" && ESPAOPC
#DEFINE ESCANUL " - [ESC] para Anular"           && ESCANUL
#DEFINE ESCAMEN " - [ESC] para Men"             && ESCAMEN
#DEFINE ESCAFIN " - [ESC] para Fin"              && ESCAFIN
#DEFINE NOACVAL "LOS VALORES INGRESADOS ESTAN ENTRE LIMITES INACEPTABLES"    && NOACVAL
#DEFINE CONTIX  " Continuaci줻"                  && CONTIX
#DEFINE RH      36 								 && RH
#DEFINE RP 		47 								 && RP
#DEFINE ENTERCON "PULSE [ENTER] PARA CONTINUAR"  && ENTERCON
#DEFINE ORQ      "Orden de Requerimiento"        && ORQ
#DEFINE ORQS     "Ordenes de Requerimiento"      && ORQS
#DEFINE NOSEL "NO SE HA SELECCIONADO"            && NOSEL
#DEFINE PIC30 "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"	 && PIC30
#DEFINE T_REINGRE "Reingrese el DATO"	 		 && T_REINGRE

** End of inserted file \SISTEMAS\DEFINES.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴end

store 1 to minobj,recini
store 3 to maxobj,recfin
STORE .F. TO M.HUBORES

#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                       MS-DOS Window definitions                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

IF NOT WEXIST("queryreb") ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.PJX" ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.SCX" ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.MNX" ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.PRG" ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.FRX" ;
	OR UPPER(WTITLE("QUERYREB")) == "QUERYREB.QPR"
	=MOVEWIX("queryreb",	INT((SROW()-8)/2), INT((SCOL()-80)/2), INT((SROW()-8)/2)+7, INT((SCOL()-80)/2)+79, ;
	 " L죑ites del Listado de Recibos "		)	
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                     QUERYREB/MS-DOS Screen Layout              
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
IF WVISIBLE("queryreb")
	ACTIVATE WINDOW queryreb SAME
ELSE
	ACTIVATE WINDOW queryreb NOSHOW
ENDIF
@ 1,2 GET m.filrec ;
	PICTURE "@*RVN \<Todos los Recibos;\<Por N즡ero;\<Opciones" ;
	SIZE 1,21,0 ;
	DEFAULT 1 ;
	WHEN betw(_curobj,minobj,maxobj) ;
	VALID _r3v1552a7() ;
	MESSAGE "L죑ites del Listado de Recibos"
@ 1,27 GET m.filfec ;
	PICTURE "@*RVN \<Todas las Fechas;\<Entre Fechas;\<Resumen por Fecha" ;
	SIZE 1,21,0 ;
	DEFAULT 1 ;
	WHEN M.FILREC=3 .AND. betw(_curobj,minobj,maxobj) ;
	VALID VAL_OBJ() ;
	MESSAGE "L죑ite de Fechas de Emisi줻"
@ 1,52 GET m.filcli ;
	PICTURE "@*RVN \<Todos los Recibos;\<Inquilinos;\<Consorcistas" ;
	SIZE 1,21,0 ;
	DEFAULT 1 ;
	WHEN M.FILREC=3 .AND. betw(_curobj,minobj,maxobj) ;
	VALID val_obj(.t.) ;
	MESSAGE "Tipo de Recibos a Listar"

IF NOT WVISIBLE("queryreb")
	ACTIVATE WINDOW queryreb
ENDIF

READ CYCLE

=RELEWIN("queryreb")

#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                     QUERYREB/MS-DOS Cleanup Code               
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
IF LAST()#27
      TTQUE=""
      cant_max=7
   DIME TEXTO[CANT_MAX,2], VARIABLE[CANT_MAX], Habilitado[CANT_MAX],habilant[cant_max]
      TEXTO[1,1]='CODIGO INMUEBLE'
      TEXTO[2,1]='TIPO UNIDAD'
      TEXTO[3,1]='DOMICILIO'
      TEXTO[4,1]='LOCALIDAD'
      TEXTO[5,1]='PROPIETARIO'
      TEXTO[6,1]='FECHA INGRESO'
      TEXTO[7,1]='ESTADO'

      TEXTO[1,2] =10
      TEXTO[2,2] =10
      TEXTO[3,2] =40
      TEXTO[4,2] =10
      TEXTO[5,2] =20
      TEXTO[6,2] =8
      TEXTO[7,2] =10

   FISC=".T."
   store .t. to habilitado
   IF FILrec=1
      TTQUE=TTQUE+CHR(13)+CHR(10)+"Todos los Recibos"
   ELSE
      STORE .T. TO HABILITADO

      HABILITADO[2]=qw_fec(4,27,'CAJ.fechaop')

      HABILITADO[3]=QW_CLI(4,52,'CAJ.CODCLI')
      ***** FISC

      FISC=qw_fisc(FISC,quefec)
      FISC=qw_FISC(FISC,quecli)
      FISC=qw_FISC(FISC,querec)
      FISC=IIF(EMPTY(FISC),'.T.',FISC)
      ***** TITULOS
      store "Resumen por " to ressu
      ttFEC=iif(filFEC=3,RESSU+'Fecha',ttfec)
      ttcli=iif(filCLI=3,RESSU+'Cliente',ttcli)
      TTQUE=QW_TT(TTrec)+qw_tt(ttrec)+QW_TT(TTcli)
   ENDIF
   **** AL FIN LISTADOS
   RELE WIND QUERYreB
   =acopy(habilitado,habilant)
   do while CFGFAC()
      =LREBZ0("(Seg즢 Base de Caja)")
      =KTRUCH()
      =OPCAJ(JANNRO,.F.,.T.)
   ENDdo
   store .f. to variable
   =acopy(habilant,habiitado)
ENDIF
RELE WIND QUERYreb
RETURN LAST()#27


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _R3V1552A7           m.filrec VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         QUERYREB,     Record Number:    2  
*        Variable:            m.filrec                           
*        Called By:           VALID Clause                       
*        Object Type:         Radio Button                       
*        Snippet Number:      1                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _r3v1552a7     &&  m.filrec VALID
#REGION 1
IF READKEY()=15 .OR. READKEY()=271
   if _curobj=2
      if qw_reb()
         IF recini=recfin
            IF XSEEK(RECINI,'CCL','NUMERORE')
               do lreciu
            ENDIF
            _CUROBJ=1
            RETURN SGET("QUERYREB")
         ELSE
            @ 4,1 SAY M.RECINI+"-"+M.RECFIN
         ENDIF
      ELSE
         STORE 3 TO _CUROBJ
      ENDIF
   ENDIF
   MINOBJ=CEIL(_CUROBJ/3)*3+1
   MAXOBJ=MINOBJ+2
   _CUROBJ=MINOBJ
ENDIF
RETURN .T.
