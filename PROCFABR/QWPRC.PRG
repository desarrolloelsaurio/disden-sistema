* ษออออออออออออออออออออออออออออออออออออออออออออป
* บ PROCEDIMIENTO : QWPRC.PRG                  บ
* บ COMENTARIO    : GENERA QUERY PARA Procesos บ
* ศออออออออออออออออออออออออออออออออออออออออออออผ
FUNCTION QWPRC
PARAMETER Q_TROF,QW_CAMPO

#DEFINE NUL    0					&& NUL
#DEFINE BOTOM  "  "+repl("ฐ",78)	&& BOTOM
#DEFINE FOLC  ".F."					&& FOLC

Q_SALIDA=FOLC
STORE Q_TROF TO M.PRC_SALIDA

DO CASE
CASE Q_TROF=1
	Q_SALIDA=".T."+CHR(250)+"Todos los Procesos"
CASE Q_TROF=2
	=QWPRC1("=",":")
CASE Q_TROF=3
	=QWPRC1("#"," NO ")
case Q_TROF=4
	DO WHILE .T.
		STORE NUL TO RESPUESTA
		IF !EMPTY(ELIPRC("a Listar",REN,COL))
			Q_SALIDA=QW_FISCO(Q_SALIDA,CUAL+'="'+PRC.PRCCOD+'"')
			TT=TT+ALLTRIM(PRC.PROCFAB)+"/"
		ELSE
			EXIT
		ENDIF
	ENDDO
	IF Q_SALIDA#FOLC
		Q_SALIDA="("+Q_SALIDA+")"+CHR(250)+SINULT(TT)
	ENDIF
ENDCASE
=MEN_LIN(BOTOM)
RETURN Q_SALIDA

FUNCTION QWPRC1
	PARAMETER QW_SIGNO,QW_TEXTO
	STORE NUL TO RESPUESTA
	IF !EMPTY(ELIPRC("a Listar",REN,COL))
		Q_SALIDA=QW_CAMPO+QW_SIGNO+'"'+PRC.PRCCOD+'"'+chr(250)+'Proceso'+QW_TEXTO+ALLTRIM(PRC.PROCFAB)
	ELSE
		STORE FOLC TO Q_SALIDA
	ENDIF
RETURN Q_SALIDA
