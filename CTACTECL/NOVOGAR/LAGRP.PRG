* ษอออออออออออออออออออออออออออออออออออออออป
* บ PROCEDIMIENTO : LAGRP.PRG             บ
* บ COMENTARIO    : AGRUPA POR FACTURA    บ
* ฬอออออออออออออออออออออออออออออออออออออออน
* บ AUTOR      : GOYO REINER              บ
* บ FECHA      : 11-19-93                 บ
* บ HORA       : 11:54:17am               บ
* บ COPYRIGHT  : 1993 by GREGORIO REINER  บ
* ศอออออออออออออออออออออออออออออออออออออออผ
ULPR=HORA_ULP(PROGRAM())
IF CHEQSEG()
	#DEFINE BOTOM  "  "+repl("ฐ",78)               && BOTOM
	#DEFINE NUL    0                               && NUL
	#DEFINE PAIP   "|"                             && PAIP
	STORE NUL TO TDEBE,THABER,CDEBE,CHABER
	STORE NUL TO DEBE,HABER,CREDITO,ELCLIENTE,ELCODIGO,LAFACTURA,LAFACT1,CASOS
	STORE "" TO TTU,ACLA,LINEA,LAFECHA
	=LAGR0()
	=WIN0()
	PAG=1
	=CABPAN()
	=LAGRO()
	=LAGRO1()
	=TIT_LIN(1)
	SCAN
		IF ROW()>21
			CORTE=PAIP+PADC("SUBTOTAL",20)+PAIP+SPACE(8)+PAIP++STR(CDEBE,XACDIGI,2)+PAIP+STR(CHABER,XACDIGI,2)+PAIP+STR(CDEBE-CHABER,XACDIGI,2)+PAIP
			IF !FIN_LIN(1,NUL,CORTE)
				EXIT
			ENDIF
			CLEA
			STOR pag+1 TO pag
			=cabpan()
			=TIT_LIN(2)
		ENDIF
		IF CCL.COMPR#LAFACTURA
			=LAGRO(.T.)
		ENDIF
		IF CCL.CODCLI#ELCODIGO
			=LAGRO1(.T.)
			IF !FIN_LIN(1,NUL)
				EXIT
			ENDIF
			CLEA
			STOR PAG+1 TO PAG
			=CABPAN()
			=TIT_LIN(1)
		ENDIF
		IF ESDEBE(CCL.COMPRRE)
			DEBE=DEBE+ABS(MONTO)
		ELSE
			HABER=HABER+ABS(MONTO)
		ENDIF
	ENDSCAN
	IF LAST()#27
		=LAGRO(.T.)
		CORTE=PAIP+PADC("TOTAL",20)+PAIP+SPACE(8)+PAIP+STR(TDEBE,XACDIGI,2)+PAIP+STR(THABER,XACDIGI,2)+PAIP+STR(TDEBE-THABER,XACDIGI,2)+PAIP
		=FIN_LIN(2,CASOS,CORTE)
	ENDIF
	=RELEWIN("win")
	=REOPCCL()
ELSE
	=IAUDI()
ENDIF
RETURN MEN_LIN(BOTOM)
