PROCEDURE MODLIQ
	#DEFINE SUCO "!!!!!!!!!!!!!!!!!!!!"
	#DEFINE BOTOM  "  "+repl("°",78)              && BOTOM
	FUNCTION MODLIQ
		DO CASE
		CASE BAR()=1
			DO WHILE ELIINQ("a Modificar",-1,1)
				ELCOD=PER.CODCLI
				=MEN_LIN("[TAB] Marca/Desmarca - [CTRL+H] Ayuda - [ENTER] Sale")
				=MOVEWIN(3,12,21,66,"WIN"," Modifica Recibo "+ALLTRIM(PER.CLIENTE)+" ")

				ON KEY LABEL TAB DO SIPORNO
				ON KEY LABEL ENTER KEYB CHR(23)
				ON KEY LABEL CTRL+R DO BUSREG
				ON KEY LABEL CTRL+I DO BUSINQ
				ON KEY LABEL CTRL+H DO MODHELP

				SELE CCL
				SET ORDER TO TAG CODCLI

				BROW FIEL ;
					A=RECNO():H="REGIS":P="99999":R ,;
					B=Q_TIPTEX(DETALLE):H=PADC("DETALLE",30):P=REPL("!",30):R ,;
					MONTO:H=PADC("MONTO",9):P="99,999.99":R ,;
					C=IIF(MARKA," SI "," NO "):H="INCL":R ;
					FREE MONTO KEY ELCOD FOR EMPTY(NUMERO)
		ENDDO
	CASE BAR()=2
		=MEN_LIN("[TAB] Marca/Desmarca - [CTRL+H] Ayuda - [ENTER] Sale")
		=MOVEWIN(3,2,21,76,"WIN"," Modifica Recibo ")

		SET ORDER TO TAG INQCOD IN PER
		SELE CCL
		SET RELA TO CODCLI INTO PER

		ON KEY LABEL TAB DO SIPORNO
		ON KEY LABEL ENTER KEYB CHR(23)
		ON KEY LABEL CTRL+R DO BUSREG
		ON KEY LABEL CTRL+I DO BUSINQ
		ON KEY LABEL CTRL+H DO MODHELP

		GO TOP
		BROW FIEL ;
			A=RECNO():H="REGIS":P="99999":R ,;
			PER.CLIENTE:P=SUCO:H=PADC("INQUILINO",20):R ,;
			B=Q_TIPTEX(DETALLE):H=PADC("DETALLE",30):P=REPL("!",30):R ,;
			MONTO:H=PADC("MONTO",9):P="99,999.99":R ,;
			C=IIF(MARKA," SI "," NO "):H="INCL":R ;
			FREE PER.CLIENTE FOR EMPTY(NUMERO)
	ENDCASE

	ON KEY LABEL ENTER
	ON KEY LABEL TAB
	ON KEY LABEL CTRL+R
	ON KEY LABEL CTRL+I
	ON KEY LABEL CTRL+H
RETURN RELEWIN("WIN") .AND. ;
	MEN_LIN(BOTOM)

FUNCTION SIPORNO
	ON KEY LABEL ENTER
	REPL CCL.MARKA WITH !CCL.MARKA
	ON KEY LABEL ENTER KEYB CHR(23)
	KEYB "{DNARROW}"
RETURN SGET("WIN")

FUNCTION BUSREG
	ON KEY LABEL ENTER
	RESPUESTA=INFIC("Registro",recc("ccl"))
	if !empty(respuesta)
		GOTO RESPUESTA
	ENDIF
	ON KEY LABEL ENTER KEYB CHR(23)
RETURN SGET("WIN")

FUNCTION BUSINQ
	ON KEY LABEL ENTER
	SELE CCL
	SET RELA OFF INTO PER
	STORE NUL TO RESPUESTA
	IF ELIINQ("a Ubicar",-1,1)
		GO TOP IN CCL
		=XSEEK(PER.CODCLI,"CCL","CODCLI")
	ENDIF
	SET ORDER TO TAG INQCOD IN PER
	SELE CCL
	SET RELA TO CODCLI INTO PER
	ON KEY LABEL ENTER KEYB CHR(23)
RETURN SGET("WIN")

FUNCTION MODHELP
	ON KEY LABEL ENTER
	=movecent(0,0,9,40,"win1"," Ayuda ")
	@ 1,2 say "[TECLA ] Fin Ayuda"
	@ 2,2 SAY "[ TAB  ] Marca / Desmarca"
	@ 3,2 say "[ENTER ] Fin Modificaci¢n"
	@ 4,2 say "[Ctrl I] Ubica Inquilino"
	@ 5,2 say "[Ctrl R] Ubica Registro"
	@ 6,2 say "[Ctrl H] Esta Ayuda"
	=inkey(0)
	ON KEY LABEL ENTER KEYB CHR(23)
return relewin("win1")
