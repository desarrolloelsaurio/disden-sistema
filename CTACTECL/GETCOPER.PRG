FUNCTION GETCOPER
* CONSIGUE EL PROXIMO NUMERO DE OPERACION
* EL PARAMETRO INDICA LA LETRA DE ADELANTE
* LA FUNCION DEVUELVE EL CODIGO DE 10 CARACTERES
PARAMETER L_COPER,L_ALIAS,L_OTRO
EL_ALIAS=ALIAS()
SELE MIX
SET ORDER TO TAG FOXGRL
SEEK "COD_OPER"
=LOCK() .OR. LOK()
COPER_NUM=VAL(TEXTO2)
IF COPER_NUM<2 .AND. USED("CCL")
   SELE CCL
   EL_RECNO1=RECNO()
   EL_RECNO2=RECC()
   EL_RECNO=MIN(EL_RECNO1,EL_RECNO2)
   EL_ORDER=ORDER()
   SET ORDER TO TAG COD_OPER
   GO BOTT
   COPER_NUM=VAL(COD_OPER)+1
   SET ORDER TO TAG (EL_ORDER)
   GO (EL_RECNO)
ENDIF
REPL MIX.TEXTO2 WITH STR(COPER_NUM+1)
UNLO IN MIX
IF !EMPTY(EL_ALIAS)
   SELE (EL_ALIAS)
ENDIF
RETURN ZERO(COPER_NUM+1,10)